<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<title>АнтиПЭ</title>
	<style>
		body {
			font-size: 120%;
			background-color: #F5F5F5;
		}
		label{
			display: block;
		}
		#resultText > b{
			color: #FF2200;
		}
		#git{
			margin-top: 30px;
		}
		#dirtyText{
			width: 50%;
			height: 30px;
			font-size: 90%;
		}
	</style>
</head>
<body>
	<h1>antiPE.js</h1>
	<h4>Фраза, внешне похожая на кириллицу</h4>
	<input type="text" value="— A чтo ecли рaк yкpoeтcя? — Haйдeм. — Kpoшeк cыпь." readonly id="dirtyText" />
	<h4>Очищенный текст</h4>
	<div id="resultText"></div>

	<h4>Что произошло?</h4>
	<p>Скрипт нашёл и заменил в исходном тексте все латинские символы на их кириллические (внешне похожие) аналоги.</p>
	<p id="git">Ссылка на <a href="https://github.com/spearance/anti-pe.js">GitHub</a></p>

	<script>
		const dirtyText = document.querySelector('#dirtyText')
		const resultText = document.querySelector('#resultText')

		const mask = {
			"A": "А","a": "а","E": "Е","e": "е","T": "Т","y": "у","O": "О","o": "о","P": "Р","p": "р","H": "Н","K": "К","X": "Х","x": "х","C": "С","c": "с","B": "В","M": "М"
		}

		const antiPE = (str) => {
			if (!str) {
				return str
			}

			Object.entries(mask).forEach(([en, ru]) => {
				str = str.replaceAll(en, `<b>${ru}</b>`)
			})

			return str
		}

		resultText.innerHTML = antiPE(dirtyText.value)
	</script>
</body>
</html>
